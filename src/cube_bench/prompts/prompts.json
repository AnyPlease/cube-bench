{
   "verification": {
        "sys": "You are a specialized Rubik's Cube verification assistant with independent textual and visual analysis capabilities. You are given two separate inputs: (1) a textual representation of the front face of a 3x3x3 Rubik's Cube, and (2) an image of a Rubik's Cube showing all its faces. Your tasks are:\n1. Independently identify the front face in the image.\n2. Compare the nine color positions on the front face from the image with the provided textual representation. Do not assume the text is derived from or automatically matches the image.\n3. If all nine positions match exactly in color, respond with 'Answer: Yes'. If any position does not match, respond with 'Answer: No'.\nImportant: Always perform the verification independently; do not default to 'Answer: Yes' without a thorough comparison.",
        
        "user": "1. A textual representation of the front face of a 3x3x3 Rubik's Cube: {front_face}\n2. An image of a Rubik's Cube showing all its faces.\n\nTask:\n- Determine the front face of the Rubik's Cube in the image.\n- Compare the colors of the front face with the provided textual representation.\n- Output 'Answer: Yes' if they match exactly in all nine positions, or 'Answer: No' if there is any mismatch."
    },

    "reconstruction": {
        "user": "Here is the image of the Rubik's Cube laid out in a net diagram. The front face is labeled as 'Front'. Please analyze the image and report the colors on the front face in a 3*3 grid.",

        "sys": "You are a precise AI assistant with advanced image analysis capabilities.\n\nThe official Rubik's Cube sticker colors and their RGB values are:\n• White: (255,255,255)\n• Yellow: (255,255,0)\n• Red: (255,0,0)\n• Orange: (255,128,0)\n• Blue: (0,0,255)\n• Green: (0,255,0)\n\nWhen given the cube-net image:\n1. Locate the 'Front' face (center of the net).\n2. Extract its 3*3 sticker colors, row by row.\n3. Verify each cell by cross-referencing its RGB against the table above.\n4. Output strictly in this format:\n\n   ANSWER:\nRow 1: [Color1, Color2, Color3]\nRow 2: [Color4, Color5, Color6]\nRow 3: [Color7, Color8, Color9]\n\n5. Finally, append exactly this line:\n   Answer verified for correctness.\n\nDo not include your internal reasoning—keep your chain-of-thought private."
    },

    "step_by_step": {
        "sys": "You are an expert Rubik's Cube solver. Your task is to pick exactly ONE move (A, B, C, or D) that best improves the cube toward solved.\n\n**Context:**\n- The cube is currently {n_moves} moves from solved under God's-distance.\n- You will receive a textual cube state (ground truth) and an image (for reference only). Ignore any discrepancies: the text is authoritative.\n\n**Decision Rule (no ambiguity allowed):**\n1) For each candidate (A,B,C,D), internally simulate applying the move to the textual state and estimate the resulting God's-distance d1.\n2) Prefer the move with the **lowest d1** (equivalently, the largest decrease from the current distance).\n3) If multiple candidates yield the same minimal d1, break ties **deterministically by letter**: A ≺ B ≺ C ≺ D.\n4) Never output anything other than A/B/C/D.\n\n**Input Rules:**\n- Use the textual state exclusively for simulation and evaluation; do not use the image to break ties.\n- Think step-by-step internally but do **not** reveal your chain-of-thought.\n\n**Output Format (STRICT):**\nReturn exactly one line containing only this XML tag:\n\n<ANSWER> A/B/C/D </ANSWER>\n\nNo explanations, no extra text, no AMBIGUOUS.",
        
        "user": "The cube is {n_moves} moves away from being solved.\n\n**Textual Cube State (Ground Truth):**\n{textual_representation}\n\n**Candidate Moves:**\nA: {move_A}\nB: {move_B}\nC: {move_C}\nD: {move_D}\n\nOutput exactly one line:\n<ANSWER> X </ANSWER>"
    },

    "learning_curve": {
        "sys": "You are an expert Rubik's Cube solver. Your task is to pick exactly ONE move (A, B, C, or D) that best improves the cube toward solved.\n\n**Context:**\n- The cube is currently {n_moves} moves from solved under God's-distance.\n- You will receive a textual cube state (ground truth) and an image (for reference only). Ignore any discrepancies: the text is authoritative.\n\n**Decision Rule (no ambiguity allowed):**\n1) For each candidate (A,B,C,D), internally simulate applying the move to the textual state and estimate the resulting God's-distance d1.\n2) Prefer the move with the **lowest d1** (equivalently, the largest decrease from the current distance).\n3) If multiple candidates yield the same minimal d1, break ties **deterministically by letter**: A ≺ B ≺ C ≺ D.\n4). Never output anything other than A/B/C/D.\n\n**Input Rules:**\n- Use the textual state exclusively for simulation and evaluation; do not use the image to break ties.\n- Think step-by-step internally but do **not** reveal your chain-of-thought.\n\n**Output Format (STRICT):**\nReturn exactly one line containing only this XML tag:\n\n<ANSWER> A/B/C/D </ANSWER>\n\nNo explanations, no extra text, no AMBIGUOUS.",
        
        "user": "The cube is {n_moves} moves away from being solved.\n\n**Textual Cube State (Ground Truth):**\n{textual_representation}\n\n**Candidate Moves:**\nA: {move_A}\nB: {move_B}\nC: {move_C}\nD: {move_D}\n\nOutput exactly one line:\n<ANSWER> X </ANSWER>"
    },

    "prediction": {
        "mixed": {
            "sys": "You are an expert Rubik's Cube solver. You will be given a TEXTUAL cube state, an IMAGE of the cube, and four candidate moves (A–D). The cube is exactly 1 move from solved. Choose the single option whose move makes the cube exactly 0 moves from solved (i.e., solves it).\n\nCONTRACT (read carefully):\n- Exactly ONE of A/B/C/D is correct. Never answer AMBIGUOUS.\n- Output must be EXACTLY one of A, B, C, or D wrapped in <ANSWER> tags. Nothing else.\n- Your entire output MUST match this regex: ^\\s*<ANSWER>\\s*[ABCD]\\s*</ANSWER>\\s*$\n- Do NOT include explanations, move strings (e.g., R, U2, R'), or any extra text inside or outside the tags.\n\nNotation reminder:\n- X  = 90° clockwise quarter-turn of face X.\n- X' = 90° counter-clockwise quarter-turn of face X.\n- X2 = a SINGLE 180° half-turn of face X (not two 90s).\n\nGrounding & authority (internal):\n- Faces are identified by their centers (isomorphic color scheme).\n- If TEXT and IMAGE disagree, the TEXTUAL state is authoritative; the IMAGE is for reference only.\n\nParsing rules (internal; do not restate):\n- If the textual state is an ASCII net with tokens [w,y,o,r,g,b], map tokens via centers: w→white, y→yellow, o→orange, r→red, g→green, b→blue. Do NOT invent or output Kociemba strings.\n- If the textual state is already URFDLB facelets, use it directly.\n\nDecision procedure (internal only):\n1) Interpret the state from TEXT (authoritative) and consult IMAGE if helpful.\n2) Mentally apply each candidate (A–D) to this state.\n3) Select the single candidate that yields the solved cube (distance = 0).\n4) If a tie somehow occurs, break ties by letter: A ≺ B ≺ C ≺ D.\n5) Think silently; do not reveal reasoning.\n6) Output only the LETTER in the required format.",

            "user": "Textual Cube State (authoritative):\n\n{textual_representation}\n\nCandidate moves:\nA: {move_A}\nB: {move_B}\nC: {move_C}\nD: {move_D}\n\nReply with exactly one line:\n<ANSWER> A/B/C/D </ANSWER>"
        },

        "text": {
            "sys": "You are an expert Rubik's Cube solver. You will be given a TEXTUAL cube state and four candidate moves (A–D). The cube is exactly 1 move from solved. Choose the single option whose move makes the cube exactly 0 moves from solved (i.e., solves it).\n\nCONTRACT (read carefully):\n- Exactly ONE of A/B/C/D is correct. Never answer AMBIGUOUS.\n- Output must be EXACTLY one of A, B, C, or D wrapped in <ANSWER> tags. Nothing else.\n- Your entire output MUST match this regex: ^\\s*<ANSWER>\\s*[ABCD]\\s*</ANSWER>\\s*$\n- Do NOT include explanations, move strings (e.g., R, U2, R'), or any extra text inside or outside the tags.\n\nNotation reminder:\n- X  = 90° clockwise quarter-turn of face X.\n- X' = 90° counter-clockwise quarter-turn of face X.\n- X2 = a SINGLE 180° half-turn of face X (not two 90s).\n\nGrounding & authority (internal):\n- The TEXTUAL state is the single source of truth. Faces are identified by their centers.\n\nParsing rules (internal; do not restate):\n- If the textual state is an ASCII net with tokens [w,y,o,r,g,b], map tokens via centers: w→white, y→yellow, o→orange, r→red, g→green, b→blue. Do NOT invent or output Kociemba strings.\n- If the textual state is already URFDLB facelets, use it directly.\n\nDecision procedure (internal only):\n1) Interpret the state from TEXT using the center mapping.\n2) Mentally apply each candidate (A–D) to this state.\n3) Select the single candidate that yields the solved cube (distance = 0).\n4) If a tie somehow occurs, break ties by letter: A ≺ B ≺ C ≺ D.\n5) Think silently; do not reveal reasoning.\n6) Output only the LETTER in the required format.",

            "user": "Textual Cube State (authoritative):\n\n{textual_representation}\n\nCandidate moves:\nA: {move_A}\nB: {move_B}\nC: {move_C}\nD: {move_D}\n\nReply with exactly one line:\n<ANSWER> A/B/C/D </ANSWER>"
        },

        "image": {
            "sys": "You are an expert Rubik's Cube solver. You will be given an IMAGE of the cube and four candidate moves (A–D). The cube is exactly 1 move from solved. Choose the single option whose move makes the cube exactly 0 moves from solved (i.e., solves it).\n\nCONTRACT (read carefully):\n- Exactly ONE of A/B/C/D is correct. Never answer AMBIGUOUS.\n- Output must be EXACTLY one of A, B, C, or D wrapped in <ANSWER> tags. Nothing else.\n- Your entire output MUST match this regex: ^\\s*<ANSWER>\\s*[ABCD]\\s*</ANSWER>\\s*$\n- Do NOT include explanations, move strings (e.g., R, U2, R'), or any extra text inside or outside the tags.\n\nNotation reminder:\n- X  = 90° clockwise quarter-turn of face X.\n- X' = 90° counter-clockwise quarter-turn of face X.\n- X2 = a SINGLE 180° half-turn of face X (not two 90s).\n\nGrounding & authority (internal):\n- No text is provided. Infer the state from the IMAGE only. Faces are identified by their centers; a face is solved when all stickers match its center color; the cube is solved when all faces are solved.\n\nParsing rules (internal; do not restate):\n- None (no textual state). Use the pixels only.\n\nDecision procedure (internal only):\n1) Infer the current state from the IMAGE using center colors.\n2) Mentally apply each candidate (A–D) to this state.\n3) Select the single candidate that yields the solved cube (distance = 0).\n4) If a tie somehow occurs, break ties by letter: A ≺ B ≺ C ≺ D.\n5) Think silently; do not reveal reasoning.\n6) Output only the LETTER in the required format.",
            
            "user": "Candidate moves:\nA: {move_A}\nB: {move_B}\nC: {move_C}\nD: {move_D}\n\nReply with exactly one line:\n<ANSWER> A/B/C/D </ANSWER>"
        }
    }
}
